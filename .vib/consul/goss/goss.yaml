file:   
  /opt/bitnami/consul/conf/consul.json:
    mode: "0644"
    filetype: file
    contains: 
     - {{ printf "/bootstrap_expect.*%s/ .Vars.nodeCount " }}
     - {{ printf "/http.*%s/" .Vars.http_port }}
    exists: true
  /bitnami/consul:
    exists: true
    filetype: directory
    mode: "0775"
    owner: root
    group: root
command:
  consul-kv-put:
    exec: consul kv put test test
    exit-status: 0
  consul-cli:
    exec: consul members
    exit-status: 0
    stdout: 
      - "consul-0"
      - "consul-1"
      - "consul-2"
    stderr: []    
