{
  "phases": {
    "package": {
      "context": {
        "resources": {
          "url": "{SHA_ARCHIVE}",
          "path": "/bitnami/contour"
        }
      },
      "actions": [
        {
          "action_id": "helm-package"
        },
        {
          "action_id": "helm-lint"
        }
      ]
    },
    "verify": {
      "context": {
        "resources": {
          "url": "{SHA_ARCHIVE}",
          "path": "/bitnami/contour"
        },
        "runtime_parameters": "Y29udG91cjoKICBlbmFibGVkOiB0cnVlCiAgbWFuYWdlQ1JEczogdHJ1ZQogIHNlcnZpY2VBY2NvdW50OgogICAgY3JlYXRlOiB0cnVlCiAgICBhdXRvbW91bnRTZXJ2aWNlQWNjb3VudFRva2VuOiB0cnVlCiAgcG9kU2VjdXJpdHlDb250ZXh0OgogICAgZW5hYmxlZDogdHJ1ZQogICAgZnNHcm91cDogMTAwMgogIGNvbnRhaW5lclNlY3VyaXR5Q29udGV4dDoKICAgIGVuYWJsZWQ6IHRydWUKICAgIHJ1bkFzVXNlcjogMTAwMgogIHNlcnZpY2U6CiAgICBwb3J0czoKICAgICAgeGRzOiA4MDAyCiAgICB0eXBlOiBDbHVzdGVySVAKZW52b3k6CiAgZW5hYmxlZDogdHJ1ZQogIGNvbnRhaW5lclBvcnRzOgogICAgaHR0cDogODA4MAogICAgaHR0cHM6IDgwODAKICBzZXJ2aWNlOgogICAgdHlwZTogTG9hZEJhbGFuY2VyCiAgICBleHRlcm5hbFRyYWZmaWNQb2xpY3k6IExvY2FsCiAgICBwb3J0czoKICAgICAgaHR0cDogODAKICAgICAgaHR0cHM6IDQ0NApyYmFjOgogIGNyZWF0ZTogdHJ1ZQpleHRyYURlcGxveToKLSBhcGlWZXJzaW9uOiBhcHBzL3YxCiAga2luZDogRGVwbG95bWVudAogIG1ldGFkYXRhOgogICAgbGFiZWxzOgogICAgICBhcHA6IGt1YXJkCiAgICBuYW1lOiBrdWFyZAogIHNwZWM6CiAgICByZXBsaWNhczogMQogICAgc2VsZWN0b3I6CiAgICAgIG1hdGNoTGFiZWxzOgogICAgICAgIGFwcDoga3VhcmQKICAgIHRlbXBsYXRlOgogICAgICBtZXRhZGF0YToKICAgICAgICBsYWJlbHM6CiAgICAgICAgICBhcHA6IGt1YXJkCiAgICAgIHNwZWM6CiAgICAgICAgY29udGFpbmVyczoKICAgICAgICAtIGltYWdlOiBnY3IuaW8va3Vhci1kZW1vL2t1YXJkLWFtZDY0OjEKICAgICAgICAgIG5hbWU6IGt1YXJkCi0gYXBpVmVyc2lvbjogdjEKICBraW5kOiBTZXJ2aWNlCiAgbWV0YWRhdGE6CiAgICBsYWJlbHM6CiAgICAgIGFwcDoga3VhcmQKICAgIG5hbWU6IGt1YXJkCiAgc3BlYzoKICAgIHBvcnRzOgogICAgLSBwb3J0OiA4MAogICAgICBwcm90b2NvbDogVENQCiAgICAgIHRhcmdldFBvcnQ6IDgwODAKICAgIHNlbGVjdG9yOgogICAgICBhcHA6IGt1YXJkCiAgICBzZXNzaW9uQWZmaW5pdHk6IE5vbmUKICAgIHR5cGU6IENsdXN0ZXJJUAotIGFwaVZlcnNpb246IG5ldHdvcmtpbmcuazhzLmlvL3YxCiAga2luZDogSW5ncmVzcwogIG1ldGFkYXRhOgogICAgbmFtZTogY29udG91ci12aWItdGVzdAogICAgbGFiZWxzOgogICAgICBhcHA6IGt1YXJkCiAgc3BlYzoKICAgIGluZ3Jlc3NDbGFzc05hbWU6IGNvbnRvdXIKICAgIGRlZmF1bHRCYWNrZW5kOgogICAgICBzZXJ2aWNlOgogICAgICAgIG5hbWU6IGt1YXJkCiAgICAgICAgcG9ydDoKICAgICAgICAgIG51bWJlcjogODA=",
        "target_platform": {
          "target_platform_id": "{VIB_ENV_ALTERNATIVE_TARGET_PLATFORM}",
          "size": {
            "name": "S4"
          }
        }
      },
      "actions": [
        {
          "action_id": "health-check",
          "params": {
            "endpoint": "lb-contour-envoy-http"
          }
        },
        {
          "action_id": "goss",
          "params": {
            "resources": {
              "path": "/.vib/contour/goss"
            },
            "remote": {
              "workload": "deploy-contour-contour"
            },
            "vars_file": "vars.yaml"
          }
        },
        {
          "action_id": "ginkgo",
          "params": {
            "resources": {
              "path": "/.vib/contour/ginkgo"

            },
            "params": {
              "kubeconfig": "{{kubeconfig}}",
              "namespace": "{{namespace}}",
              "ingress-name": "contour-vib-test"
            }
          }
        }
      ]
    }
  }
}
