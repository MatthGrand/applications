
file:
  /opt/bitnami/fluentd/Gemfile:
    mode: "0644"
    filetype: file
    exists: true  
command:
  fluentd-conf-test:
    exec: fluentd -c /opt/bitnami/fluentd/conf/fluentd.conf --dry-run
    exit-status: 0
    stdout: 
      - {{ printf "/bitnami.*%s/" .Env.BITNAMI_APP_NAME }}
      - parsing config file is succeeded 
      - kafka
      - grafana-loki
      - elasticsearch
    stderr: []
  user-id-test:
    exec: if [ "$(id -u)" -eq 0 ]; then exit 1; fi
    exit-status: 0
    stdout: []
    stderr: []
  fluentd-version:
    exec: fluentd --version | grep --quiet "$APP_VERSION"
    exit-status: 0
    stdout: []
    stderr: []  
  fluent-cat-test:
    exec: echo '{"message":"hello"}' | fluent-cat debug.log
    exit-status: 0
    stdout: []
    stderr: []  
