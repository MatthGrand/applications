tls:
  enabled: true
  autoGenerated:
    enabled: true
    engine: helm
ui:
  replicaCount: 2
  enabled: true
  service:
    ports:
      http: 80
    type: LoadBalancer
  serviceAccount:
    create: true
  podSecurityContext:
    enabled: true
    fsGroup: 1002
  backend:
    containerSecurityContext:
      enabled: true
      runAsUser: 1002
  frontend:
    containerSecurityContext:
      enabled: true
      runAsUser: 1002
relay:
  replicaCount: 2
  serviceAccount:
    create: true
  podSecurityContext:
    enabled: true
    fsGroup: 1002
  containerSecurityContext:
    enabled: true
    runAsUser: 1002
  # required to act as server peer
  sidecars:
  - name: cilium
    image: bitnami/cilium:latest
    imagePullPolicy: IfNotPresent
    ports:
      - name: http
        containerPort: 4244
    command:
      - cilium-agent
    args:
      - --lib-dir
      - /opt/bitnami/cilium/var/lib
      - --state-dir
      - /opt/bitnami/cilium/var/run
      - --enable-hubble
      - --hubble-listen-address
      - ":4244"
      - --hubble-disable-tls
      - --hubble-socket-path
      - /opt/bitnami/cilium/var/run/hubble.sock
serverPeers:
  host: localhost
  port: 4244
