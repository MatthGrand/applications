{{- if .Values.server.additionalApplications }}
apiVersion: v1
kind: List
items:
{{- range .Values.server.additionalApplications }}
  - apiVersion: argoproj.io/v1alpha1
    kind: Application
    metadata:
      {{- if .annotations }}
      annotations: {{- include "common.tplvalues.render" ( dict "value" .annotations "context" $ ) | nindent 8 }}
      {{- end }}
      {{- if .labels }}
      labels: {{- include "common.tplvalues.render" ( dict "value" .labels "context" $ ) | nindent 8 }}
      {{- end }}
      name: {{ .name }}
      {{- if .namespace }}
      namespace: {{ .namespace }}
      {{- end }}
      {{- if .finalizers }}
      finalizers: {{- include "common.tplvalues.render" ( dict "value" .finalizers "context" $ ) | nindent 8 }}
      {{- end }}
    spec:
      #REVIEW
      project: {{ tpl .project $ }}
      source: {{- include "common.tplvalues.render" ( dict "value" .source "context" $ ) | nindent 8 }}
      destination: {{- include "common.tplvalues.render" ( dict "value" .destination "context" $ ) | nindent 8 }}
      {{- if .syncPolicy }}
      syncPolicy: {{- include "common.tplvalues.render" ( dict "value" .syncPolicy "context" $ ) | nindent 8 }}
      {{- end }}
      {{- if .ignoreDifferences }}
      ignoreDifferences: {{- include "common.tplvalues.render" ( dict "value" .ignoreDifferences "context" $ ) | nindent 8 }}
      {{- end }}
{{- end }}
{{- end }}
