{{- /*
Copyright VMware, Inc.
SPDX-License-Identifier: APACHE-2.0
*/}}
{{-
/*
Prefer .Values.backup.persistence, but fall back to .Values.persistence if not present.
*/
-}}
{{- if .Values.backup.enabled }}
  {{- if and .Values.backup.persistence .Values.backup.persistence.enabled (not .Values.backup.persistence.existingClaim) }}
    {{- include "influxdb.backup.pvc" (list $ .Values.backup.persistence) }}
  {{- else if and .Values.persistence.enabled }}
    {{- include "influxdb.backup.pvc" (list $ .Values.persistence) }}
  {{- else }}
  {{/* Should backups be supported without any persistence? */}}
  {{- end }}
{{- end }}
